<?php
$post['id']='14';
$post['title']='Моя збірка Mosquito Bloody Mary';
$post['text']='<div align="center"><img src="https://poohitan.com/images/mosq-logo.png"><br></div><br>Мене тут попросили викласти збірку <a target="" title="" href="http://mqblog.ru/">Mosquito Bloody Mary</a>, на якій працює цей сайт. Mosquito це безкоштовний двигун з відкритим кодом, написаний на PHP. Легкий, відкритий, по-своєму класний. Я трішки допиляв його під свої вимоги, але це було півроку тому, всіх змін вже не пам’ятаю. Те що знайшов — пишу тут. <cut><span id="cut"><img id="scissors" src="templates/cut.png" border="0"></span></cut>Переважно всі редагування це якісь дрібниці. Основні зміни — у файлах шаблонів.<br><ol><li>Дати постів виводяться у форматі типу «16 лютого 2014 о 21:18». Не забув про 11 годину, для неї виводиться «об» замість «о» :). Крім того, для сьогоднішніх чи вчорашніх записів, замість повної дати виводиться «Сьогодні» чи «Вчора» відповідно. Ця зміна десь у файлі <b>data/functions.inc</b>.</li><li>Додав посторінкову Ctrl-навігацію. Тобто можна пересуватись між сторінками записів за допомогою комбінацій кнопок Ctrl+стрілочка вбік (для старіших записів — стрілка вправо, для новіших — вліво). Файл <b>data/actions/blog.inc</b>.</li><li>Українізував двигун. Файли в теці <b>lang</b>.</li><li>Щось змінив у плагіні теґів (файл <b>plugins/tags/funcs.inc</b>). Лінь розбиратись, що то таке, ну та й начхати :)<br></li><li>Зробив так, щоб в RSS потік записи виводились лише до кату, і вставлялось «Читати повністю» з лінком на повний запис. Файли у теці <b>rss.</b></li><li>Якісь дрібні зміни у <b>index.php.<br></b><br>Тепер до змін у шаблонах.</li><li>Дизайн робив свій з нуля. CSS стилі, іконки і тд. Спершу намалював psd шаблон, потім зверстав, потім натягнув його на Mosquito. Наполегливо прошу його не використовувати, а переробляти під себе, не будьте козлами :).<br></li><li>З шаблонів коментарів я випиляв оригінальну москітівську форму коментування і запиляв <b>Disqus</b>. Файли <b>templates/comment.html</b>, <b>templates/comment_a.html</b>, <b>templates/comment_form.html</b>, <b>templates/comment_last.html</b>. Сам Disqus я теж трошки редагував, про це <a target="" title="" href="https://poohitan.com/p/12">був запис</a>.</li><li>Адмін-панель в мене окремим блоком, зліва. Дрібні зміни у <b>templates/head.php</b>.<br></li><li>Багато змін у <b>templates/post.html</b>. Розписувати не буду, шаблон запису чудово видно тут на сайті.</li><li>Не пригадую, як виглядають налаштування запису в оригінальному Москіті, але в мене вони виглядають отак:<br><br><img alt="" src="https://poohitan.com/images/my-mq02.png" align="none"><br><br>Виводяться n найчастіше вживаних теґів, їх можна вставити до запису просто по кліку. Файл <b>templates/post_form.html</b>.<br></li><li>На тому ж скріні вгорі видно, що в мене кастомні красиві чекбокси замість стандартних :)</li><li>Змінив вигляд, у якому виводяться записи в режимі архіву (як виглядає вживу можна глянути <a target="" title="" href="https://poohitan.com/archive/">тут</a>). Тут для обрізання запису до певної кількості слів використовується ф-кція <b>cutString</b>, її я дописав у <b>data/functions.inc</b>.<br><br>Mosquito використовує WYSIWYG редактор <a target="" title="" href="http://nicedit.com/">Nicedit</a>. Його я теж переробляв під себе:</li><li>Українізував.<br></li><li>Додав функціонал для вставки кату, цитат, коду з Pastebin, відео з Youtube. Самі функції у файлі <b>nicEdit.js</b>. Перелік кнопок, які використовуються в редакторі можна змінити у файлі <b>templates/post_form.html</b> (там де створюється об’єкт <b>nicEditor</b>). Іконки для своїх кнопок додав у спрайт <b>templates/nicEditor.png</b>.</li><li>Зробив, щоб <b>Nicedit </b>аплоадив зображення на мій сервер, а не на <b>Imageshack</b>. Файл <b>nicUpload.php</b> (в оригінальній збірці він відсутній). <br></li><li>Переписав функцію для вставки зображень із сторонніх сайтів. Там тепер можна вибирати кількість зображень, які будуть в рядку, щоб створювати щось аля-галерей.</li><li>Зробив, щоб при спробі закриття незбереженого запису видавалось попередження (про це теж <a target="" title="" href="https://poohitan.com/p/9">був запис</a>).<br><br>Загалом форма редагування записів в мене виглядає так:<br><br><img alt="" src="https://poohitan.com/images/my-mq03.png" align="none"></li><li>Українізував і трошки змінив вигляд додатку <b>Shadowbox </b>(в оригінальній збірці його нема, можна завантажити <a target="" title="" href="http://mqblog.ru/page/Spisok_plaginov">тут</a>).</li><li>Ще є різні дрібні зміни у файлах шаблонів.</li></ol><p>Крім того я написав свій маленький двигун для <a target="" title="" href="https://poohitan.com/trash/">смітника</a>, але його викладати не буду, він надто примітивний, там навіть редагування записів нема).</p><p>Завантажити збірку можна <a target="" title="" href="https://poohitan.com/files/mq-pooh.zip">тут</a>.<br></p><p>Розбиратись в коді, написаному автором двигуна — складно, розбиратись після того, як я туди щось подописував — взагалі смертельно. Тому важко уявити, як комусь може пригодитись ця збірка, але попросили, то виклав :)</p>';
$post['hidden']='';
$post['subs']='';
$post['holdtime']='';
$post['dietime']='';
$post['close']='';
$post['nocomm']='';
$post['commhide']='';
$post['attach']='';
$post['commpriv']='';
$post['nobr']='';
?>